<!-- Candidate card for list view -->
<div
  class="candidate-card p-4 border rounded-lg cursor-pointer bg-white hover:bg-blue-50 transition"
  data-candidate-id="{% if candidate.chat_id %}{{ candidate.chat_id }}{% else %}recommend_{{ candidate.index }}{% endif %}"
    hx-get="
        /candidates/detail?mode={{ candidate.mode or 'chat' }}
        {%- if candidate.chat_id %}&chat_id={{ candidate.chat_id }}{% endif %}
        {%- if candidate.index is defined %}&index={{ candidate.index }}{% endif %}
        &name={{ candidate.name | urlencode }}
        &job_title={{ candidate.job_title | urlencode }}
        &text={{ (candidate.text or candidate.last_message or '') | urlencode }}
        {%- if candidate.stage %}&stage={{ candidate.stage }}{% endif %}
        {% if candidate.viewed is defined %}
        &viewed={{ candidate.viewed }}{% endif %}
        {%- if candidate.greeted is defined %}&greeted={{ candidate.greeted }}{% endif %}"
    hx-target="#detail-pane"
    hx-include="#job-selector,#assistant-selector"
>
  <div class="flex items-start space-x-3">
    <div class="flex-shrink-0">
      <div
        class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center"
      >
        <span class="text-lg">ğŸ‘¤</span>
      </div>
    </div>
    <div class="flex-1 min-w-0">
      <h3 class="font-bold text-gray-900 truncate">
        {{ candidate.name or 'æœªçŸ¥' }}
      </h3>
      <p class="text-sm text-gray-600 truncate">
        {{ candidate.job_title or candidate.job_applied or 'æœªæŒ‡å®šå²—ä½' }}
      </p>
      <p class="text-xs text-gray-500 mt-1 line-clamp-2">
        {{ candidate.text or candidate.last_message or 'æš‚æ— æ¶ˆæ¯' }}
      </p>
      <div class="mt-2 flex flex-wrap gap-1">
        {% if candidate.viewed %}
        <span
          class="inline-block px-2 py-1 text-xs rounded-full bg-purple-100 text-purple-700"
        >
          ğŸ‘ï¸ å·²æŸ¥çœ‹
        </span>
        {% endif %} {% if candidate.greeted %}
        <span
          class="inline-block px-2 py-1 text-xs rounded-full bg-green-100 text-green-700"
        >
          ğŸ‘‹ å·²æ‰“æ‹›å‘¼
        </span>
        {% endif %}
      </div>
    </div>
  </div>
</div>
